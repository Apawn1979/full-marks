(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{407:function(s,t,a){"use strict";a.r(t);var n=a(10),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"横屏时字体变大问题解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#横屏时字体变大问题解决方案"}},[s._v("#")]),s._v(" 横屏时字体变大问题解决方案")]),s._v(" "),a("p",[s._v("在小程序开发中，经常遇到以下令人苦恼的场景：")]),s._v(" "),a("h2",{attrs:{id:"场景一"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#场景一"}},[s._v("#")]),s._v(" 场景一")]),s._v(" "),a("p",[s._v("页面支持竖屏和"),a("strong",[s._v("横屏")]),s._v("模式，二者可以互相切换。"),a("br"),s._v(" "),a("strong",[s._v("问题")]),s._v("：横屏时字体过大，元素尺寸异常，布局混乱。")]),s._v(" "),a("h2",{attrs:{id:"场景二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#场景二"}},[s._v("#")]),s._v(" 场景二")]),s._v(" "),a("p",[s._v("页面本身不支持横屏，但页面中有视频支持"),a("strong",[s._v("全横屏")]),s._v("播放。"),a("br"),s._v(" "),a("strong",[s._v("问题")]),s._v("：退出横屏瞬间，字体过大，布局混乱，随即恢复正常。")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("关键字")]),s._v(" "),a("p",[s._v("横屏、字体变大、布局混乱")])]),s._v(" "),a("h2",{attrs:{id:"原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原因"}},[s._v("#")]),s._v(" 原因")]),s._v(" "),a("p",[s._v("布局和字体大小的尺寸单位是 "),a("code",[s._v("rpx")]),s._v("，但根据官方文档的描述，"),a("code",[s._v("rpx")]),s._v(" 是以【屏宽】为基准进行计算的。"),a("br"),s._v("\n我们布局一般是在竖屏模式（portrait）下进行的，一旦进入横屏模式（landscape），【屏宽】实际是原来的【屏高】，\n因此，同样的尺寸值，在横屏模式下占据的物理像素数将变大。")]),s._v(" "),a("h2",{attrs:{id:"解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[s._v("#")]),s._v(" 解决方案")]),s._v(" "),a("p",[s._v("经过上述分析，我们布局时——无论横屏还是竖屏——只要保证尺寸计算的基准都是屏幕较短的“边”即可，"),a("code",[s._v("rpx")]),s._v("不能满足需要，可使用 "),a("code",[s._v("vmin")]),s._v(" 替代。"),a("br"),s._v("\n但需要"),a("a",{attrs:{href:"/mini-program/common/rpx-to-vmin"}},[s._v("换算")]),s._v("，例：")]),s._v(" "),a("div",{staticClass:"language-css line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".selector")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* font-size: 32rpx; */")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("calc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("32vmin * 10 / 75"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("如果你使用 "),a("code",[s._v("sass")]),s._v(" ，可借助自定义“函数”能力，可在大量需要 "),a("code",[s._v("vmin")]),s._v(" 的时候提升你的开发体验：")]),s._v(" "),a("div",{staticClass:"language-scss line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-scss"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 声明函数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("@function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$n")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("@return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 10 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" 75 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" vmin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[s._v(".selector ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* font-size: 32rpx; */")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("32"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);