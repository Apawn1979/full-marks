---
 tags:
   - 横屏
   - 字体变大
   - 布局混乱
---

# 横屏时字体变大问题解决方案

在小程序开发中，经常遇到以下令人苦恼的场景：

## 场景一

页面支持竖屏和**横屏**模式，二者可以互相切换。  
**问题**：横屏时字体过大，元素尺寸异常，布局混乱。

## 场景二

页面本身不支持横屏，但页面中有视频支持**全横屏**播放。  
**问题**：退出横屏瞬间，字体过大，布局混乱，随即恢复正常。

::: tip 关键字
横屏、字体变大、布局混乱
:::

## 原因

布局和字体大小的尺寸单位是 `rpx`，但根据官方文档的描述，`rpx` 是以【屏宽】为基准进行计算的。  
我们布局一般是在竖屏模式（portrait）下进行的，一旦进入横屏模式（landscape），【屏宽】实际是原来的【屏高】，
因此，同样的尺寸值，在横屏模式下占据的物理像素数将变大。

## 解决方案

经过上述分析，我们布局时——无论横屏还是竖屏——只要保证尺寸计算的基准都是屏幕较短的“边”即可，`rpx`不能满足需要，可使用 `vmin` 替代。  
但需要[换算](/mini-program/common/rpx-to-vmin)，例：

```css
.selector {
  /* font-size: 32rpx; */
  font-size: calc(32vmin * 10 / 75);
}
```

如果你使用 `sass` ，可借助自定义“函数”能力，可在大量需要 `vmin` 的时候提升你的开发体验：

```scss
// 声明函数
@function vm($n) {
  @return $n * 10 / 75 + vmin;
}

// 使用
.selector {
  /* font-size: 32rpx; */
  font-size: vm(32);
}
```
